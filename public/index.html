<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(gChartsLoaded);

      function gChartsLoaded() {
        var req = new XMLHttpRequest();
        req.addEventListener('load', dataLoaded);
        req.open('GET', 'clicks.php');
        req.send();
      }

      function dataLoaded() {
        console.log(this.responseText);
        var data = JSON.parse(this.responseText);
        data.unshift(['Name', 'Number']);
        var dataTable = google.visualization.arrayToDataTable(data);
        var chart = new google.visualization.PieChart(document.getElementById('chart'));
        chart.draw(dataTable, {
          title: 'Email recipient OS preferences' 
        });
      }
    </script>
  </head>
  <body>
    <h1>SparkPost Recipient OS Report</h1>
    <p>This report shows the OS preferences of the recipients who click on links in your SparkPost-tracked email</p>
    <div id="chart" style="width: 500px; height: 500px">
    </div>

  </body>
</html>

